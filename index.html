<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ATM Project</title>
  <link rel="stylesheet" href="atm.css">
</head>
<body>
  <div class="container">
    <div class="card">
      <h1>ATM Project â€” Web Version</h1>
      <p class="muted">Simulates Withdraw, Deposit, Pin Management, and Mini Statement</p>

      <div class="grid">
        <div class="menu">
          <button id="btn-withdraw" class="active">1. Withdraw</button>
          <button id="btn-deposit">2. Deposit</button>
          <button id="btn-pin">3. Generate / Reset Pin</button>
          <button id="btn-mini">4. Mini Statement</button>
          <button id="btn-exit">5. Exit (Reset UI)</button>
        </div>

        <div id="pane"></div>
      </div>
    </div>
  </div>

  <script>
    const accounts = {
      2001: [9200, 9347, "user1@gmail.com", "user1"],
      2002: [2040, 8096, "user2@gmail.com", "user2"],
      2003: [19000, null, "user3@gmail.com", "user3"]
    };

    const pane = document.getElementById('pane');
    const menuButtons = document.querySelectorAll('.menu button');

    function setActive(id){
      menuButtons.forEach(b => b.classList.remove('active'));
      document.getElementById(id).classList.add('active');
    }

    function showMessage(msg){
      const div = document.createElement('div');
      div.className = 'log';
      div.textContent = msg;
      pane.appendChild(div);
      pane.scrollTop = pane.scrollHeight;
    }

    function clearPane(){
      pane.innerHTML = '';
    }

    function getAccountInputFields(includePin=false){
      const wrapper = document.createElement('div');
      wrapper.innerHTML = `
        <label>Account Number</label>
        <input type="number" id="acc" placeholder="e.g. 2001" />
      `;
      if(includePin){
        const pinLabel = document.createElement('label');
        pinLabel.textContent = 'Pin';
        const pinInput = document.createElement('input');
        pinInput.type = 'number';
        pinInput.id = 'pin';
        pinInput.placeholder = '4-digit pin (if set)';
        wrapper.appendChild(pinLabel);
        wrapper.appendChild(pinInput);
      }
      return wrapper;
    }

    function renderWithdraw(){
      setActive('btn-withdraw');
      clearPane();
      const form = document.createElement('div');
      form.appendChild(getAccountInputFields(true));
      const amtLabel = document.createElement('label');
      amtLabel.textContent = 'Amount to withdraw';
      const amtInput = document.createElement('input');
      amtInput.type = 'number';
      amtInput.id = 'amount';
      amtInput.placeholder = 'e.g. 500';
      const submit = document.createElement('button');
      submit.className = 'btn primary';
      submit.textContent = 'Withdraw';
      submit.onclick = () => {
        const acc = Number(document.getElementById('acc').value);
        if(!accounts[acc]){ showMessage('Invalid Account Number'); return; }
        if(accounts[acc][1] === null){ showMessage(`Dear ${accounts[acc][3]} Pin not Generated!`); return; }
        const pin = Number(document.getElementById('pin').value);
        if(accounts[acc][1] !== pin){ showMessage(`Dear ${accounts[acc][3]} Please Enter the Correct pin Try Again!`); return; }
        const amount = Number(document.getElementById('amount').value);
        if(amount <= accounts[acc][0]){
          accounts[acc][0] -= amount;
          showMessage('Transaction Successfully Completed!');
          showMessage(`Available Balance: ${accounts[acc][0]}`);
        } else {
          showMessage('Insufficient Balance');
        }
      };
      form.appendChild(amtLabel); form.appendChild(amtInput); form.appendChild(submit);
      pane.appendChild(form);
    }

    function renderDeposit(){
      setActive('btn-deposit');
      clearPane();
      const form = document.createElement('div');
      form.appendChild(getAccountInputFields(false));
      const amtLabel = document.createElement('label');
      amtLabel.textContent = 'Amount to deposit';
      const amtInput = document.createElement('input');
      amtInput.type = 'number';
      amtInput.id = 'amount';
      amtInput.placeholder = 'e.g. 1000';
      const submit = document.createElement('button');
      submit.className = 'btn primary';
      submit.textContent = 'Deposit';
      submit.onclick = () => {
        const acc = Number(document.getElementById('acc').value);
        if(!accounts[acc]){ showMessage('Invalid Account Number'); return; }
        const amount = Number(document.getElementById('amount').value);
        accounts[acc][0] += amount;
        showMessage('Deposit Successful!');
        showMessage(`Available Balance: ${accounts[acc][0]}`);
      };
      form.appendChild(amtLabel); form.appendChild(amtInput); form.appendChild(submit);
      pane.appendChild(form);
    }

    function renderMini(){
      setActive('btn-mini');
      clearPane();
      const form = document.createElement('div');
      form.appendChild(getAccountInputFields(true));
      const submit = document.createElement('button');
      submit.className = 'btn primary';
      submit.textContent = 'Show Mini Statement';
      submit.onclick = () => {
        const acc = Number(document.getElementById('acc').value);
        if(!accounts[acc]){ showMessage('Invalid Account Number'); return; }
        const pin = Number(document.getElementById('pin').value);
        if(accounts[acc][1] !== pin){ showMessage('Invalid Pin!'); return; }
        showMessage(`Name: ${accounts[acc][3]}`);
        showMessage(`Email: ${accounts[acc][2]}`);
        showMessage(`Balance: ${accounts[acc][0]}`);
      };
      form.appendChild(submit);
      pane.appendChild(form);
    }

    function resetUI(){
      setActive('btn-exit');
      clearPane();
      showMessage('Thank you for using our service!');
    }

    document.getElementById('btn-withdraw').onclick = renderWithdraw;
    document.getElementById('btn-deposit').onclick = renderDeposit;
    document.getElementById('btn-mini').onclick = renderMini;
    document.getElementById('btn-exit').onclick = resetUI;

    renderWithdraw();
  </script>
</body>
</html>
